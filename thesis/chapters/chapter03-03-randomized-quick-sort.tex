\section{Rodzina randomizowanych algorytmów Quick Sort}
Klasyczny algorytm Quick Sort kiepsko sobie radzi z uporządkowanymi lub prawie uporządkowanymi danymi wejściowymi. W najmniej skutecznym wariancie, tzn. podczas wyboru piwota jako ostatni element tablicy, algorytm ten działa ze złożonością czasową $O(n^2)$. W przypadku uporządkowanych danych wejściowych skutecznym sposobem może okazać się niedeterministyczny wybór piwota. W tym rozdziale dokonano analizy randomizowanych algorytmów z rodziny Quick Sort, z podziałem na metody partycjonowania Lemuto oraz Hoarego. W analizie wykorzystano następujące metody wyboru piwota:

\begin{itemize}
	\setlength\itemsep{0em}
	\item \BOLD{losowy element} - piwotem jest losowo wybrany element tablicy,
	\item \BOLD{mediana z trzech wyborów} - przystosowanie meotdy \BOLD{power of two choices} do potrzeby wyznaczania mediany, piwotem jest mediana z trzech losowo wybranych elementów,
	\item \BOLD{pseudo-mediana z dziewięciu wyborów} - piwotem jest mediana z dziewięciu losowo wybranych elementów.\\
\end{itemize}

\subsection{Analiza porównawcza algorytmów}
Tak jak w poprzednim rozdziale, algorytmy były analizowane pod kątem liczby wykonywanych operacji atomowych, z podziałem na operacje porównania, zamiany miejsc oraz przypisania. Dodatkowo badano łączny koszt wykonanych operacji jako sumę ważoną liczby operacji atomowych, z uwzględnieniem wartości współczynnika kosztu. Badając łączną liczbę wykonanych operacji założono stałą wartość współczynnika kosztu $\alpha = 1.0$.\\

Dla losowych danych wejściowych (\ref{fig:quick-sort-nondeterministic-pivot-random}), przy założeniu że operacja porównania jest czasowo równoważna operacji przypisania ($\alpha=1.0$), większość randomizowanych metod wyboru piwota okazuje się mniej skuteczna od klasycznego algorytmu Quick Sort. Przy partycjonowaniu metodą Lemuto jedyną skuteczniejszą metodą jest wybór piwota jako mediana z trzech losowych elementów. Przy partycjonowaniu metodą Hoarego, najskuteczniejszym okazuje się wybór za piwota losowego elementu tablicy. Połączenie metody Hoarego z losowym wyborem piwota jest również najskuteczniejszym podejściem podczas sortowania losowych danych. Najmniej wydajną strategią sortowania okazał się wybór piwota jako pseudo-mediana z dziewięciu losowych elementów, przy czym najgorszy wynik osiągnięto dla obydwu metod partycjonowania.\\

Dla danych wejściowych posortowanych w odwrotnej kolejności (\ref{fig:quick-sort-nondeterministic-pivot-reversed}), czyli dla przypadku pesymistycznego w klasycznym algorytmie Quick Sort, przy założeniu że operacja porównania jest czasowo równoważna operacji przypisania ($\alpha=1.0$), najskuteczniejszą strategią sortowania również okazało się partycjonowanie metodą Hoarego przy wyborze piwota jako losowy element tablicy. Spośród randomizowanych strategii sortowania najmniej wydajną okazał się wybór piwota jako pseudo-mediana z dziewięciu losowych elementów. W przypadku danych wejściowych posortowanych w odwrotnej kolejności, każda ze strategii randomizowanych jest wydajniejsza od klasycznego podejścia w metodzie Quick Sort.\\

Analizując łączny koszt wykonanych operacji (\ref{fig:quick-sort-nondeterministic-pivot-cost-factor}) w zależności od wartości współczynnika kosztu $\alpha$ można zauważyć, że dla złożonych typów danych najskuteczniejszą z badanych strategii jest partycjonowanie metodą Lemuto z wyborem piwota jako mediana z trzech losowych elementów. Metoda ta jest najskuteczniejsza powyżej wartości $\alpha = 2.5$, co można interpretować jako sortowanie struktur złożonych z co najmniej trzech typów prostych. Najmniej skuteczną strategią sortowania złożonych struktur jest wybór piwota pseudo-mediana z dziewięciu losowych elementów.\\

Porównując liczbę wykonanych operacji (\ref{fig:quick-sort-nondeterministic-pivot-random-all}) można stwierdzić, że dla dowolnych randomizowanych strategii wyboru piwota, partycjonowanie metodą Hoare wykonuje większą liczbę operacji porównania oraz mniejszą liczbę operacji zamiany miejsc. Tak jak w przypadku algorytmów deterministycznych, czynnik ten może okazać się istotny w przypadku sortowania złożonych struktur.\\

Badając rozkład prawdopodobieństwa liczby wykonanych operacji dla algorytmów randomizowanych (\ref{fig:quick-sort-nondeterministic-pivot-density}) można zauważyć, że algorytmy korzystające z partycjonowania metodą Hoare mają mniejsze odchylenie standardowe niż algorytmy z partycjonowaniem metodą Lemuto. Każdy z randomizowanych algorytmów wyboru piwota daje w wyniku mniejsze odchylenie standardowe od klasycznego algorytmu Quick Sort. Najmniejsze odchylenie standardowe uzyskano dla partycjonowania metodą Hoare z wyborem piwota jako pseudo-mediana z dziewięciu wyborów, jednak równocześnie dla tego algorytmu uzyskano największą wartość oczekiwaną liczby wykonanych operacji. Najmniejszą wartość oczekiwaną uzyskano dla partycjonowania metodą Hoare przy wyborze piwota jako losowy element tablicy.

\begin{figure}[]
	\centering
	\includesvg[inkscapelatex=false,width=0.8\columnwidth]{img/plot/quick-sort-nondeterministic-pivot-random.svg}
	\caption[]{}
	\label{fig:quick-sort-nondeterministic-pivot-random}
\end{figure}

\begin{figure}[]
	\centering
	\includesvg[inkscapelatex=false,width=0.8\columnwidth]{img/plot/quick-sort-nondeterministic-pivot-reversed.svg}
	\caption[]{}
	\label{fig:quick-sort-nondeterministic-pivot-reversed}
\end{figure}

\begin{figure}[]
	\centering
	\includesvg[inkscapelatex=false,width=0.8\columnwidth]{img/plot/quick-sort-nondeterministic-pivot-cost-factor.svg}
	\caption[]{}
	\label{fig:quick-sort-nondeterministic-pivot-cost-factor}
\end{figure}

\begin{figure}[]
	\centering
	\includesvg[inkscapelatex=false,width=0.8\columnwidth]{img/plot/quick-sort-nondeterministic-pivot-density.svg}
	\caption[]{}
	\label{fig:quick-sort-nondeterministic-pivot-density}
\end{figure}

\begin{figure}[]
	\centering
	\includesvg[inkscapelatex=false,width=1.1\columnwidth]{img/plot/quick-sort-nondeterministic-pivot-random-all.svg}
	\caption[]{}
	\label{fig:quick-sort-nondeterministic-pivot-random-all}
\end{figure}

\subsection{Wnioski}
W przypadku randomizowanych algorytmów z rodziny Quick Sort, podobnie jak dla algorytmów deterministycznych, partycjonowanie metodą Hoare jest wydajniejsze dla danych wejściowych typu prostego. Należy jednak zauważyć, że partycjonowanie metodą Hoare wykonuje większą liczbę operacji porównania, więc strategia ta jest mniej wydajna w przypadku sortowania złożonych struktur danych. Powyżej wartości współczynnika kosztu równej $\alpha = 4.0$, partycjonowanie metodą Lemuto jest wydajniejsze niż partycjonowanie metodą Hoare, niezależnie od strategii wyboru piwota. Sytuacja ta jest równoważna z sortowaniem struktur składających się z co najmniej czterech zmiennych podstawowych. W tym przypadku należy skorzystać z partycjonowania metodą Lemuto.\\

Analizując liczbę wykonanych operacji można stwierdzić, że w przypadku algorytmów randomizowanych korzystanie z kosztownych strategii wyboru piwota jest nieopłacalne. Najskuteczniejszą metodą, zarówno dla losowych jak i posortowanych danych, okazuje się wybór losowego elementu tablicy.\\
